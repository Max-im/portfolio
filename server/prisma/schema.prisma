datasource db {
    url      = env("DATABASE_URL")
    provider = "postgresql"
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id        Int      @id @default(autoincrement())
    createdAt DateTime @default(now())
    email     String   @unique
    role      Role     @default(USER)
}

model Project {
    id          Int               @id
    createdAt   DateTime          @default(now())
    updatedAt   DateTime          @updatedAt
    published   Boolean           @default(true)
    title       String            @db.VarChar(255)
    description String            @db.VarChar(1023)
    gitUrl      String            @db.VarChar(255)
    storefront  String            @db.VarChar(255)
    skills      SkillsOnProject[]
}

model Skill {
    id          Int               @id @default(autoincrement())
    isActive    Boolean           @default(true)
    value       String            @unique @db.VarChar(255)
    url         String            @db.VarChar(255)
    displayName String            @unique @db.VarChar(255)
    projects    SkillsOnProject[]
    group       SkillGroup        @default(OTHER)
}

model SkillsOnProject {
    prject    Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
    projectId Int
    skill     Skill   @relation(fields: [skillId], references: [id], onDelete: Cascade)
    skillId   Int

    @@id([projectId, skillId])
}

model Experience {
    id           Int      @id @default(autoincrement())
    startedAt    DateTime
    finishedAt   DateTime
    organisation String   @db.VarChar(255)
    description  String   @db.VarChar(255)
}

model Education {
    id           Int      @id @default(autoincrement())
    startedAt    DateTime
    finishedAt   DateTime
    organisation String   @db.VarChar(255)
    description  String   @db.VarChar(255)
}

enum Role {
    USER
    ADMIN
}

enum SkillGroup {
    FRONTEND
    BACKEND
    DATABASE
    CICD
    OTHER
}
